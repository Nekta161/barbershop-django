---
st_group: python 413
project: "[[–ê–∫–∞–¥–µ–º–∏—è TOP]]"
journal: "[[PYTHON413]]"
tags:
  - PYTHON413
  - django
  - orm
  - optimization
  - select_related
  - prefetch_related
  - annotate
  - homework
date: 2025-07-12
type:
  - home work
hw_num: 42
topic: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Django —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Django Debug Toolbar, select_related, prefetch_related –∏ annotate
hw_theme:
  - django
  - orm
  - django-debug-toolbar
  - select_related
  - prefetch_related
  - annotate
  - a–≥—Ä–µ–≥–∞—Ü–∏—è
links:
  - "[[PYTHON413 HW ‚Ññ41]]"
---
# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ üìÉ  

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Django –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

## –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

–í —ç—Ç–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç–µ—Å—å –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í—ã –Ω–∞—É—á–∏—Ç–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—É "N+1 –∑–∞–ø—Ä–æ—Å–∞" —Å –ø–æ–º–æ—â—å—é Django Debug Toolbar, –∞ —Ç–∞–∫–∂–µ –æ—Å–≤–æ–∏—Ç–µ –º–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Django ORM –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤: `select_related` –∏ `prefetch_related`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å –≤—ã—á–∏—Å–ª—è—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é `annotate`.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: ü¶æ

- Python
- Django
- Django ORM
- Django Debug Toolbar
- `select_related`
- `prefetch_related`
- `annotate`
- `Sum`

## –ó–∞–¥–∞–Ω–∏–µ üë∑‚Äç‚ôÇÔ∏è

### –ß–∞—Å—Ç—å 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Django Debug Toolbar

`Django Debug Toolbar` (DDT) ‚Äî —ç—Ç–æ –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É** —Å –ø–æ–º–æ—â—å—é `Poetry`:

```sh
poetry add django-debug-toolbar
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `settings.py`**:
    - –î–æ–±–∞–≤—å—Ç–µ `'debug_toolbar'` –≤ —Å–ø–∏—Å–æ–∫ `INSTALLED_APPS`.
    - –î–æ–±–∞–≤—å—Ç–µ `'debug_toolbar.middleware.DebugToolbarMiddleware'` –≤ —Å–ø–∏—Å–æ–∫ `MIDDLEWARE`.
    - –£–∫–∞–∂–∏—Ç–µ `INTERNAL_IPS`, —á—Ç–æ–±—ã –ø–∞–Ω–µ–ª—å –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å —É –≤–∞—Å –ª–æ–∫–∞–ª—å–Ω–æ:

```python
INTERNAL_IPS = [
    "127.0.0.1",
]
      ```
3.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `urls.py`** –≤ –∫–æ—Ä–Ω–µ–≤–æ–º —Ñ–∞–π–ª–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è DDT:
```python
from django.urls import include, path

urlpatterns = [
    path('__debug__/', include('debug_toolbar.urls')),
]
```

### –ß–∞—Å—Ç—å 2: –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ "–ë—ã–ª–æ"

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ DDT –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≤–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö —Å–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø–∞–Ω–µ–ª–∏ DDT, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —á–µ—Ç–∫–æ –≤–∏–¥–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
    - **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)**: –≥–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –º–∞—Å—Ç–µ—Ä–∞ –∏ –æ—Ç–∑—ã–≤—ã.
    - **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –∑–∞—è–≤–æ–∫ (`/orders/`)**.
    - **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ª—é–±–æ–π –∑–∞—è–≤–∫–µ (`/orders/<int:pk>/`)**.
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ —Ç—Ä–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, `screenshots/before`. –≠—Ç–æ –≤–∞—à–µ "–ë—ã–ª–æ".

>[!info]
>
>### –ù–∞ —á—Ç–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ
>
>–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, –≥–¥–µ –≤—ã–≤–æ–¥—è—Ç—Å—è —Å–ø–∏—Å–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–æ—Å—ã –∫ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞—è–≤–∫–∏ –≤ —Å–ø–∏—Å–∫–µ). –≠—Ç–æ –∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ "N+1", –∫–æ—Ç–æ—Ä—É—é –º—ã –±—É–¥–µ–º —Ä–µ—à–∞—Ç—å.

### –ß–∞—Å—Ç—å 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

–ò—Å–ø–æ–ª—å–∑—É—è `select_related` –∏ `prefetch_related`, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –≤–∞—à–∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö (`views.py`).

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**:
    - –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `select_related('master')`, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Å—Ç–µ—Ä–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–∑—ã–≤–∞.
2. **–°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ (`orders_list`)**:
    - –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `select_related('master')` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –º–∞—Å—Ç–µ—Ä–µ –∏ `prefetch_related('services')` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ü–∏–∫–ª–µ.
3. **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ (`order_detail`)**:
    - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–ø–∏—Å–∫—É, –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `select_related` –∏ `prefetch_related`, —á—Ç–æ–±—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

>[!warning]
>
>### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞
>
>- `select_related` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–µ–π "–æ–¥–∏–Ω-–∫-–æ–¥–Ω–æ–º—É" (`OneToOneField`) –∏ "–º–Ω–æ–≥–∏–µ-–∫-–æ–¥–Ω–æ–º—É" (`ForeignKey`). –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω—è—è `JOIN` –Ω–∞ —É—Ä–æ–≤–Ω–µ SQL.
>- `prefetch_related` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–µ–π "–º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º" (`ManyToManyField`) –∏ –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å–≤—è–∑–µ–π `ForeignKey`. –û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ "—Å–æ–µ–¥–∏–Ω—è–µ—Ç" –∏—Ö –≤ Python.

### –ß–∞—Å—Ç—å 4: –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ "–°—Ç–∞–ª–æ" –∏ —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

1. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã "–°—Ç–∞–ª–æ"**:
    - –ü–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ –∂–µ —Ç—Ä–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–≥–ª–∞–≤–Ω–∞—è, —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫, –¥–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏).
    - –°–¥–µ–ª–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø–∞–Ω–µ–ª–∏ DDT, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.
    - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö –≤ –ø–∞–ø–∫—É `screenshots/after`.
2. **–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞—è–≤–∫–∏**:
    - –í –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ `order_detail` –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ queryset.
    - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `annotate()` –∏ `Sum()` –∏–∑ `django.db.models` –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É—Å–ª—É–≥, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞—è–≤–∫–æ–π.

      ```python
      from django.db.models import Sum
      
      # –ü—Ä–∏–º–µ—Ä–Ω—ã–π –∫–æ–¥ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏
      order = Order.objects.annotate(
          total_price=Sum('services__price')
      ).get(pk=pk)
      ```

    - –í—ã–≤–µ–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `order.total_price` –≤ —à–∞–±–ª–æ–Ω–µ `order_detail.html`.

### –¢–∞–±–ª–∏—Ü–∞ –º–µ—Ç–æ–¥–æ–≤ –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π

| –ú–µ—Ç–æ–¥ / –ö–æ–Ω—Ü–µ–ø—Ü–∏—è       | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                             |
| ----------------------- | ---------------------------------------------------------------------------------------------------- |
| `Django Debug Toolbar`  | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—Ä–æ—Å–µ, –≤–∫–ª—é—á–∞—è SQL-–∑–∞–ø—Ä–æ—Å—ã.             |
| `select_related`        | –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, "–ø–æ–¥—Ç—è–≥–∏–≤–∞—è" —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (ForeignKey, OneToOne) –æ–¥–Ω–∏–º SQL-–∑–∞–ø—Ä–æ—Å–æ–º —Å JOIN. |
| `prefetch_related`      | –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –ø–æ–ª—É—á–∞—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (ManyToMany, –æ–±—Ä–∞—Ç–Ω—ã–µ FK) –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º.         |
| `annotate`              | –î–æ–±–∞–≤–ª—è–µ—Ç –∫ –∫–∞–∂–¥–æ–º—É –æ–±—ä–µ–∫—Ç—É –≤ QuerySet –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ –ø–æ–ª–µ (–∞–≥—Ä–µ–≥–∞—Ü–∏—é).                                 |
| `Sum`                   | –ê–≥—Ä–µ–≥–∞—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—É–º–º—ã –∑–Ω–∞—á–µ–Ω–∏–π –≤ –Ω–∞–±–æ—Ä–µ.                                            |

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ üëå

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DDT –∏ –∞–Ω–∞–ª–∏–∑ "–ë—ã–ª–æ": 3 –±–∞–ª–ª–∞**
    - `Django Debug Toolbar` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.
    - –ü—Ä–∏–ª–æ–∂–µ–Ω—ã 3 —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ ("–ë—ã–ª–æ") –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤.

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤: 5 –±–∞–ª–ª–æ–≤**
    - `select_related` –∏ `prefetch_related` –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –≤ –Ω—É–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≥–ª–∞–≤–Ω–æ–π, —Å–ø–∏—Å–∫–∞ –∏ –¥–µ—Ç–∞–ª–µ–π).
    - –ü—Ä–∏–ª–æ–∂–µ–Ω—ã 3 —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ ("–°—Ç–∞–ª–æ"), –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –≤–∏–¥–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ö–æ–∂–∏—Ö –∏ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Ö –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü.
    - –ö–æ–¥ –≤ `views.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

3. **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å `annotate`: 3 –±–∞–ª–ª–∞**
    - –í –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –æ–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `annotate` –∏ `Sum`.
    - –†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —à–∞–±–ª–æ–Ω–µ.
    - –ü—Ä–∏–ª–æ–∂–µ–Ω —Å–∫—Ä–∏–Ω—à–æ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—è–≤–∫–∏ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏.

4. **–û–±—â–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Å–¥–∞—á–∞ —Ä–∞–±–æ—Ç—ã: 1 –±–∞–ª–ª**
    - –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8.
    - –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–¥–∞–Ω –≤ –≤–∏–¥–µ –∞—Ä—Ö–∏–≤–∞, –≤–∫–ª—é—á–∞—è –≤—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã.
    - –í—Å—è —Ä–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î, –±–µ–∑ "–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö" –∑–Ω–∞—á–µ–Ω–∏–π.
